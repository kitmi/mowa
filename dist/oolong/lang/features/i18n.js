'use strict';const inflection=require('inflection'),Util=require('../../../util.js'),_=Util._,FEATURE_NAME='i18n';function initialize(entity,options){if(!options){throw new Error('Missing feature options!')}if(!_.isPlainObject(options)){throw new Error('Invalid feature options. Plain object expected!')}if(!options.field){throw new Error('Missing field name in options!')}if(!options.locales){throw new Error('Missing locale mapping in options!')}if(!_.isPlainObject(options.locales)){throw new Error('Invalid locale mapping. Plain object expected!')}entity.addFeature(FEATURE_NAME,options,true).on('afterFields',()=>{if(!entity.hasField(options.field)){throw new Error('Field "'+options.field+'" does not exist!')}let fieldInfo=entity.fields[options.field],suffixSet=new Set(Object.values(options.locales));for(let suffix of suffixSet){let fieldName=options.field+'_'+suffix;entity.addField(fieldName,fieldInfo)}})}module.exports=initialize;