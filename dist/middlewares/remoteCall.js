'use strict';const Mowa=require('../server.js');module.exports=(options,appModule)=>{return async(ctx,next)=>{let ctrlName=ctx.params.controller;if(!options.controllers.has(ctrlName)){return next()}ctx.appModule=appModule;let ctrl=options.controllers.get(ctrlName),method=ctx.body.method;if(!method||'function'!==typeof ctrl[method]){ctx.throw(Mowa.HttpCode.HTTP_BAD_REQUEST)}let actioner=ctrl[method];await actioner(ctx);return next()}};