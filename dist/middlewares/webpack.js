'use strict';const connect=require('koa-connect'),webpack=require('webpack'),webpackDevMiddleware=require('webpack-dev-middleware');module.exports=function(options,appModule){let extraConfig=Object.assign({},options),configPath=appModule.toAbsolutePath(appModule.options.etcPath,`webpack.${appModule.env}.js`),config=require(configPath);const compiler=webpack(config);return async(ctx,next)=>{ctx.status=200;return connect(webpackDevMiddleware(compiler,extraConfig))(ctx,next)}};