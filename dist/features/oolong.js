'use strict';const path=require('path');const Mowa=require('../server.js');const Util=Mowa.Util;const Promise=Util.Promise;module.exports={type:Mowa.Feature.INIT,load_:function(appModule,oolong){appModule.oolong=oolong;appModule.on('after:'+Mowa.Feature.DBMS,()=>{appModule.getDbSchema=function(schemaName){if(!schemaName){if(defaultSchema in oolong){schemaName=oolong.defaultSchema}else{throw new Error('Invalid schemaName!')}}let dbFile=path.resolve(appModule.backendPath,Mowa.Literal.MODELS_PATH,schemaName+'.js');return require(dbFile)}});return Promise.resolve()}};