'use strict';const path=require('path');const Mowa=require('../server.js');const Util=Mowa.Util;const Promise=Util.Promise;module.exports={type:Mowa.Feature.INIT,load_:function(appModule,oolong){appModule.on('after:'+Util.Feature.DBMS,()=>{appModule.getSchema=function(schemaName){if(!schemaName){if(defaultSchema in oolong){schemaName=oolong.defaultSchema}else{throw new Error('Invalid schemaName!')}}let dbFile=path.resolve(appModule.backendPath,appModule.options.modelsPath,schemaName+'.js');return require(dbFile)}});return Promise.resolve()}};